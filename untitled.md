---
description: >-
  Python cookbook:
  https://python3-cookbook.readthedocs.io/zh_CN/latest/c10/p01_make_hierarchical_package_of_modules.html
---

# Libraries

## Numpy

### Array

#### Create Array

创建Array，可以看到虽然和list一样都是用\[brackets]括起来的，但components之间并没有逗号。

```python
a = np.array([1,2,3,4])
print("a:\n", a)
a.shape

## a:
##  [1 2 3 4]
## (4, )
```

**创建二维矩阵**用list of lists，每一个sublist代表一行

```python
b = np.array([[1,2], [3,4]])
print("b:\n", b)
b.shape

## b:
##  [[1 2]
##  [3 4]]
## (2, 2)
```

**reshape**:&#x20;

```python
a.reshape((2,2))

## array([[1, 2],
##        [3, 4]])py
```

**np.arange**

```python
np.arange(10).reshape((2,5))  # 2x5 matrix


## array([[0, 1, 2, 3, 4],
##        [5, 6, 7, 8, 9]])
```

**np.zeros, np.ones**

```python
np.zeros((5,))
np.ones((2,4))

## array([0., 0., 0., 0., 0.])
## array([[1., 1., 1., 1.],
##        [1., 1., 1., 1.]])
```

#### Universal Functions

```python
a = np.arange(12).reshape((3,4))
print(a)

## [[ 0  1  2  3]
##  [ 4  5  6  7]
##  [ 8  9 10 11]]

print(100 + a, '\n')
## [[100 101 102 103]
##  [104 105 106 107]
##  [108 109 110 111]]

print(2**a, "\n")  # remember: exponent with **, not with ^
## [[   1    2    4    8]
##  [  16   32   64  128]
##  [ 256  512 1024 2048]]

# Comparison operators
(a < 3) | (a > 8)  # logical or

## array([[ True,  True,  True, False],
##        [False, False, False, False],
##        [False,  True,  True,  True]])
```

### Array Indexing and Slicing

#### Extracting elements based on position

```python
a = np.arange(12)
print(a[::2])  # every second element

## [ 0  2  4  6  8 10]

a[5:11] = -1
## array([ 0,  1,  2,  3,  4, -1, -1, -1, -1, -1, -1, 11])
```

When working with matrices (2-D arrays), need two indices

```
c[1,2]   # 2nd row, 3rd column
c[1] # 2nd row
## array([4, 5, 6, 7])
```

Comma can separate not just two indices but two slices, so we can write

```
c[:,2]  # all rows, 3rd column

## array([ 2,  6, 10])

c[:2]  # 1st, 2nd row
## array([[0, 1, 2, 3],
##        [4, 5, 6, 7]])

c[:2, :3]  # 1s, 2nd row, first three columns
## array([[0, 1, 2],
##        [4, 5, 6]])
```



## Directory Structure

```
$ pwd
/path/to/project/directory/

$ ls
|- notebooks/
   |- 01-first-logical-notebook.ipynb
   |- 02-second-logical-notebook.ipynb
   |- prototype-notebook.ipynb
   |- archive/
	  |- no-longer-useful.ipynb
	 |- figures/ #figures relevant to the project are placed
|- projectname/ #all things that are refactored out of notebooks to keep them clean
   |- projectname/
	  |- __init__.py #import functions and variables into our notebooks and scripts
	  |- config.py #place in special paths and variables that are used across the project
	  |- custom_funcs.py #custome code
	  |- data.py
	  |- utils.py
	  |- test_config.py # respective config.py
	  |- test_custom_funcs.py # respective custom_funs.py
   |- setup.py # name, version. if the project is small, no need for it
|- README.md
|- data/
   |- raw/
   |- processed/
   |- cleaned/
|- scripts/ #getting the data in shape, or stitching together figures generated by individual notebooks.
   |- script1.py
   |- script2.py
   |- archive/
      |- no-longer-useful.py
|- environment.yml
```

In notebook, some packages can be imported:

```python
from projectname import something
from projectname.config import data_path
from projectname.custom_funcs import custom_preprocessor

```



此外还有sklearn的transformerMixin和pipeline等使MLproject变得高效的工具

## Module & Package

Module: .py file

Package: a dictionary with `__init__.py`. 这个文件可以是空的，也可以导入module。

* `__init__.py`中还可以有一个重要的变量，`__all__`。如`__all__=["mod1","mod2"在此module中的两个py文件,"sub"子文件夹]`

{% embed url="https://zhuanlan.zhihu.com/p/37047465" %}

{% embed url="https://www.jianshu.com/p/d0a5a42569cb" %}

{% embed url="https://zhuanlan.zhihu.com/p/54764686" %}

[https://zhuanlan.zhihu.com/p/42220907](https://zhuanlan.zhihu.com/p/42220907)

## sys

### sys.path

当我们导入一个模块时：import  xxx，默认情况下python解析器会搜索当前目录、已安装的内置模块和第三方模块，搜索路径存放在**sys模块的path**中：

```python
>>>import sys
>>>sys.path
['/Users/Downloads/code/Python/Project/Haoyuan_Dong_presession_exercise/notebook',
 '/Users/opt/anaconda3/lib/python37.zip',
 '/Users/opt/anaconda3/lib/python3.7']
 >>>sys.path.append("path of package")
```

sys.path returns a list, so we can use `sys.path.append("引用模块的地址")`，来添加自己写的模块

## OS

### os.chdir

在notebook的代码cell中，如果需要访问不同层级文件夹中的内容时，可以用`os.chdir("path")`

## Environment

配置conda环境：[https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html)

环境管理：[https://www.jb51.net/softjc/696132.html](https://www.jb51.net/softjc/696132.html)

## pathlib

{% embed url="https://docs.python.org/zh-cn/3/library/pathlib.html" %}

[https://cuiqingcai.com/6598.html](https://cuiqingcai.com/6598.html)

{% embed url="https://zhuanlan.zhihu.com/p/87940289" %}

```
|- in/
   |- input.xlsx
|- out/
   |- output.xlsx
```

```python
from pathlib import Path
# walk through subdictrinory
in_file = Path.cwd() / "in" / "input.xlsx"
out_file = Path.cwd() / "out" / "output.xlsx"
# another way
in_file = Path.cwd().joinpath("in").joinpath("input.xlsx")
out_file = Path.cwd().joinpath("out").joinpath("output.xlsx")
# tricky way
parts = ["in", "input.xlsx"]
in_file = Path.cwd().joinpath(*parts)

# walk up to parents, the number is bigger, closer to root
In : p = Path('/Users/dongweiming/test')
In : p.parents[0]
Out: PosixPath('/Users/dongweiming')
In : p.parents[1]
Out: PosixPath('/Users')
In : p.parents[2]
Out: PosixPath('/')
In : p.parent
Out: PosixPath('/Users/dongweiming')
In : p.parent.parent
Out: PosixPath('/Users')

# Parse file names
filename = Path("source_data/text_files/raw_data.txt")
print(filename.name)
# prints "raw_data.txt"
print(filename.suffix)
# prints "txt"
print(filename.stem)
# prints "raw_data"
```

## Frequence Pattern Mining

### [Apriori](http://rasbt.github.io/mlxtend/user\_guide/frequent\_patterns/apriori/)
